name: üìä Gerar Relat√≥rios

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Criar estrutura b√°sica
      run: |
        # Criar pastas
        mkdir -p docs/reports
        
        # Contar arquivos
        HTML=$(find . -name "*.html" | wc -l)
        CSS=$(find . -name "*.css" | wc -l)
        JS=$(find . -name "*.js" | wc -l)
        
        # Site principal SIMPLES
        echo '<!DOCTYPE html>
        <html>
        <head>
            <title>Im√≥veis Macei√≥</title>
            <style>body{font-family:Arial;padding:20px;}</style>
        </head>
        <body>
            <h1>üè† Im√≥veis Macei√≥</h1>
            <p>Sistema de gest√£o de im√≥veis em Macei√≥</p>
            <p><a href="/imoveis-maceio/reports/">üìä Ver relat√≥rios t√©cnicos</a></p>
        </body>
        </html>' > docs/index.html
        
        # Relat√≥rio SIMPLES
        echo "<!DOCTYPE html>
        <html>
        <head>
            <title>Relat√≥rio T√©cnico</title>
            <style>
                body { font-family: Arial; padding: 20px; }
                h1 { color: green; }
                .stats { display: flex; gap: 20px; margin: 30px 0; }
                .box { border: 2px solid green; padding: 15px; text-align: center; }
            </style>
        </head>
        <body>
            <h1>üìã Relat√≥rio T√©cnico</h1>
            <p>Im√≥veis Macei√≥ - $(date)</p>
            
            <div class='stats'>
                <div class='box'><h3>$HTML</h3><div>HTML</div></div>
                <div class='box'><h3>$CSS</h3><div>CSS</div></div>
                <div class='box'><h3>$JS</h3><div>JavaScript</div></div>
            </div>
            
            <p>‚úÖ Sistema funcionando!</p>
            <p><a href='/imoveis-maceio/'>‚Üê Voltar ao site</a></p>
        </body>
        </html>" > docs/reports/index.html
        
        echo "‚úÖ Arquivos criados"
        ls -la docs/
        ls -la docs/reports/
    
    - name: Commit
      run: |
        git config --global user.name "GitHub Actions"
        git config --global user.email "actions@github.com"
        git add docs/
        git commit -m "üìä Atualiza relat√≥rios" || echo "Sem mudan√ßas"
        git push || echo "Nada para push"
