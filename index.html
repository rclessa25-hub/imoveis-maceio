<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEBER LESSA CORRETORA E INCORPORA√á√ïES - Im√≥veis Macei√≥</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a5276;
            --secondary: #2980b9;
            --accent: #3498db;
            --gold: #f39c12;
            --green: #27ae60;
            --text: #2c3e50;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #27ae60;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: linear-gradient(135deg, #1a5276 0%, #2980b9 100%);
            min-height: 100vh;
        }
        
        /* Header e Navega√ß√£o */
        .header {
            background: rgba(255, 255, 255, 0.98);
            padding: 1.5rem 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .logo-text h1 {
            color: var(--primary);
            font-size: 1.8rem;
            margin-bottom: 0.2rem;
        }
        
        .logo-text p {
            color: var(--secondary);
            font-size: 1rem;
            font-weight: 500;
        }
        
        .contact-info {
            text-align: right;
        }
        
        .contact-info .phone {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.3rem;
        }
        
        .contact-info .address {
            font-size: 0.9rem;
            color: var(--dark);
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(26, 82, 118, 0.8), rgba(41, 128, 185, 0.8)), url('https://images.unsplash.com/photo-1544984243-ec57ea16fe25?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 4rem 1rem;
        }
        
        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .hero p {
            font-size: 1.3rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .cta-button {
            display: inline-block;
            background: var(--gold);
            color: white;
            padding: 0.9rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
        }
        
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(243, 156, 18, 0.6);
        }
        
        /* Servi√ßos Section */
        .services {
            background: white;
            padding: 4rem 1rem;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .section-title h2 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .section-title p {
            color: var(--dark);
            max-width: 700px;
            margin: 0 auto;
            font-size: 1.1rem;
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .service-card {
            background: var(--light);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .service-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }
        
        .service-card h3 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .service-card p {
            color: var(--dark);
        }
        
        /* Im√≥veis Section */
        .properties {
            padding: 4rem 1rem;
            background: #f8f9fa;
        }
        
        .filters {
            background: white;
            padding: 1.5rem;
            margin: 0 auto 2rem;
            max-width: 1200px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .filter-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .filter-btn {
            background: var(--light);
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .property-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .property-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        
        .property-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(45deg, var(--accent), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .rural-image {
            background: linear-gradient(45deg, var(--green), #2ecc71);
        }
        
        .property-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--gold);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .rural-badge {
            background: var(--green);
        }
        
        .property-content {
            padding: 1.5rem;
        }
        
        .property-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .property-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }
        
        .property-location {
            color: #666;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .property-features {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .feature-tag {
            background: var(--accent);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .rural-tag {
            background: var(--green);
        }
        
        .contact-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .contact-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 119, 182, 0.3);
        }
        
        .video-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 15px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Sobre Section */
        .about {
            background: white;
            padding: 4rem 1rem;
        }
        
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
            align-items: center;
        }
        
        .about-text h2 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }
        
        .about-text p {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            line-height: 1.7;
        }
        
        .about-image {
            background: linear-gradient(45deg, var(--accent), var(--secondary));
            height: 400px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        /* Footer */
        .footer {
            background: var(--dark);
            color: white;
            padding: 3rem 1rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: var(--gold);
        }
        
        .footer-section p, .footer-section a {
            color: #bbb;
            margin-bottom: 0.8rem;
            display: block;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-section a:hover {
            color: white;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 1rem;
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }
        
        .copyright {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #999;
        }
        
        /* ========== ESTILOS DO PAINEL ADMIN ========== */
        .admin-panel {
            background: #f8f9fa;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 1000px;
            border-radius: 10px;
            display: none;
        }
        
        .admin-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 1.2rem;
        }
        
        .property-item {
            background: #f5f5f5;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--primary);
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .contact-info {
                text-align: center;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .about-content {
                grid-template-columns: 1fr;
            }
            
            .property-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-options {
                flex-direction: column;
                align-items: center;
            }
            
            .filter-btn {
                width: 100%;
                max-width: 250px;
            }
            
            .property-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-container">
                <div class="logo">WL</div>
                <div class="logo-text">
                    <h1>WEBER LESSA</h1>
                    <p>CORRETORA E INCORPORA√á√ïES</p>
                </div>
            </div>
            <div class="contact-info">
                <div class="phone">
                    <i class="fas fa-phone"></i> (82) 9.9604-4513
                </div>
                <div class="address">
                    <i class="fas fa-map-marker-alt"></i> Empresarial Sizi & Neusa - Pra√ßa S√£o Vicente, 09 - Centro, Macei√≥-AL
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <h1>Encontre seu im√≥vel dos sonhos em Macei√≥</h1>
        <p>Na orla mais bonita do Brasil, com a expertise de quem entende do mercado imobili√°rio alagoano</p>
        <a href="#properties" class="cta-button">
            <i class="fas fa-home"></i> Ver Im√≥veis
        </a>
    </section>

    <!-- Servi√ßos Section -->
    <section class="services">
        <div class="section-title">
            <h2>Nossos Servi√ßos Especializados</h2>
            <p>Oferecemos solu√ß√µes completas para suas necessidades imobili√°rias</p>
        </div>
        <div class="services-grid">
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>Equipe de Corretagem</h3>
                <p>Venda de lotes, im√≥veis residenciais, comerciais, s√≠tios, ch√°caras e fazendas com equipe qualificada.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-building"></i>
                </div>
                <h3>Incorporacao Imobili√°ria</h3>
                <p>Desenvolvemos empreendimentos de alto padr√£o com qualidade e inova√ß√£o.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-hand-holding-usd"></i>
                </div>
                <h3>Financiamento Facilitado</h3>
                <p>Linhas banc√°rias com boleto facilitado e condi√ß√µes especiais para sua aquisi√ß√£o.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-gavel"></i>
                </div>
                <h3>Regulariza√ß√£o de Im√≥veis</h3>
                <p>Usucapi√£o, heran√ßa, invent√°rio e toda documenta√ß√£o necess√°ria para regulariza√ß√£o.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-hand-holding-heart"></i>
                </div>
                <h3>Minha Casa Minha Vida</h3>
                <p>Acesso facilitado ao programa governamental para realiza√ß√£o do sonho da casa pr√≥pria.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-tractor"></i>
                </div>
                <h3>Propriedades Rurais</h3>
                <p>Especialistas em s√≠tios, ch√°caras e fazendas com documenta√ß√£o completa e regularizada.</p>
            </div>
        </div>
    </section>

    <!-- Im√≥veis Section -->
    <section class="properties" id="properties">
        <div class="section-title">
            <h2>Im√≥veis em Destaque</h2>
            <p>Confira nossas melhores oportunidades em Macei√≥ e regi√£o</p>
        </div>
        
        <div class="filters">
            <h3>Filtrar por:</h3>
            <div class="filter-options">
                <button class="filter-btn active">Todos</button>
                <button class="filter-btn">Residencial</button>
                <button class="filter-btn">Comercial</button>
                <button class="filter-btn">Rural</button>
                <button class="filter-btn">Minha Casa Minha Vida</button>
            </div>
        </div>
        
        <div class="property-grid" id="properties-container">
            <!-- Os im√≥veis ser√£o carregados aqui via JavaScript -->
        </div>
    </section>

    <!-- Sobre Section -->
    <section class="about">
        <div class="about-content">
            <div class="about-text">
                <h2>Sobre a Weber Lessa</h2>
                <p>Com anos de experi√™ncia no mercado imobili√°rio de Macei√≥, a Weber Lessa Corretora e Incorpora√ß√µes se consolidou como refer√™ncia em solu√ß√µes imobili√°rias completas e personalizadas.</p>
                <p>Nossa equipe especializada atua em todas as fases do processo: desde a assessoria na compra e venda, passando pela regulariza√ß√£o documental, at√© o financiamento e incorpora√ß√£o de empreendimentos.</p>
                <p>Localizada no Empresarial Sizi & Neusa, no cora√ß√£o de Macei√≥, estamos prontos para ajudar voc√™ a realizar o sonho do im√≥vel pr√≥prio com seguran√ßa, transpar√™ncia e expertise.</p>
            </div>
            <div class="about-image">
                <div>
                    <i class="fas fa-building"></i>
                    <p>Empresarial Sizi & Neusa</p>
                    <p>Sede Weber Lessa</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Weber Lessa</h3>
                <p>Corretora e Incorpora√ß√µes com tradi√ß√£o e qualidade no mercado imobili√°rio de Macei√≥.</p>
                <div class="social-icons">
                    <a href="#" class="social-icon"><i class="fab fa-whatsapp"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Contato</h3>
                <p><i class="fas fa-phone"></i> (82) 9.9604-4513</p>
                <p><i class="fas fa-map-marker-alt"></i> Empresarial Sizi & Neusa</p>
                <p>Pra√ßa S√£o Vicente, 09 - Centro</p>
                <p>Macei√≥ - AL, 57020-420</p>
                <p><i class="fas fa-clock"></i> Segunda a Sexta: 8h √†s 18h</p>
            </div>
            <div class="footer-section">
                <h3>Links R√°pidos</h3>
                <a href="#properties">Im√≥veis</a>
                <a href="#services">Servi√ßos</a>
                <a href="#about">Sobre N√≥s</a>
                <a href="#contact">Contato</a>
            </div>
            <div class="footer-section">
                <h3>Especialidades</h3>
                <a href="#">Venda de Im√≥veis</a>
                <a href="#">Propriedades Rurais</a>
                <a href="#">Incorpora√ß√£o</a>
                <a href="#">Financiamento</a>
                <a href="#">Regulariza√ß√£o</a>
                <a href="#">Minha Casa Minha Vida</a>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2025 Weber Lessa Corretora e Incorpora√ß√µes. Todos os direitos reservados.</p>
        </div>
    </footer>

    /* ========== ESTILOS PARA IMAGENS DOS IM√ìVEIS ========== */
.property-image {
    position: relative;
    overflow: hidden;
}

.property-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.property-card:hover .property-image img {
    transform: scale(1.05);
}

.image-count {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0,0,0,0.7);
    color: white;
    padding: 0.3rem 0.6rem;
    border-radius: 15px;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    gap: 5px;
}

<!-- ========== PAINEL DE ADMINISTRA√á√ÉO ATUALIZADO ========== -->
<section class="admin-panel" id="adminPanel">
    <h3 style="text-align: center; color: var(--primary); margin-bottom: 1.5rem;">
        <i class="fas fa-cog"></i> Painel do Corretor - Weber Lessa
    </h3>
    
    <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <h4 id="formTitle">Adicionar Novo Im√≥vel</h4>
        <form id="propertyForm">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                <div>
                    <label><strong>T√≠tulo do Im√≥vel *</strong></label>
                    <input type="text" id="propTitle" placeholder="Ex: Apartamento Vista Mar" required style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px; width: 100%;">
                </div>
                <div>
                    <label><strong>Pre√ßo *</strong></label>
                    <input type="text" id="propPrice" placeholder="Ex: R$ 450.000" required style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px; width: 100%;">
                </div>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label><strong>Localiza√ß√£o *</strong></label>
                <input type="text" id="propLocation" placeholder="Ex: Ponta Verde, Macei√≥-AL" required style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px; width: 100%;">
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label><strong>Descri√ß√£o</strong></label>
                <textarea id="propDescription" placeholder="Descreva o im√≥vel..." style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px; width: 100%; height: 100px;"></textarea>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label><strong>Caracter√≠sticas (separadas por v√≠rgula)</strong></label>
                <input type="text" id="propFeatures" placeholder="Ex: 2 Quartos, 1 Vaga, Piscina, Varanda" style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px; width: 100%;">
                <small style="color: #666;">Separe por v√≠rgulas</small>
            </div>
            
            <!-- ========== SE√á√ÉO UPLOAD DE FOTOS/VIDEOS ========== -->
            <div style="margin-bottom: 1.5rem;">
                <label><strong>Fotos e V√≠deos do Im√≥vel</strong></label>
                
                <div id="uploadArea" style="border: 2px dashed #ddd; border-radius: 10px; padding: 2rem; text-align: center; margin: 1rem 0; cursor: pointer; transition: all 0.3s ease; background: #fafafa;">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 2.5rem; color: #ccc; margin-bottom: 1rem;"></i>
                    <p style="margin: 0.5rem 0; font-size: 1.1rem; color: #555;">Clique ou arraste fotos e v√≠deos aqui</p>
                    <p style="margin: 0; font-size: 0.9rem; color: #888;">
                        <i class="fas fa-image"></i> Fotos (JPG, PNG) ‚Ä¢ 
                        <i class="fas fa-video"></i> V√≠deos (MP4)
                    </p>
                    <p style="margin: 0.5rem 0 0; font-size: 0.8rem; color: #999;">M√°ximo: 10 arquivos ‚Ä¢ 5MB cada</p>
                </div>
                
                <input type="file" id="fileInput" multiple accept="image/*,video/*" style="display: none;">
                
                <div id="uploadPreview" style="display: flex; gap: 10px; flex-wrap: wrap; margin: 1rem 0; min-height: 60px;"></div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                <div>
                    <label><strong>Tipo do Im√≥vel</strong></label>
                    <select id="propType" style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px; width: 100%;">
                        <option value="residencial">Residencial</option>
                        <option value="comercial">Comercial</option>
                        <option value="rural">Rural</option>
                    </select>
                </div>
                <div>
                    <label><strong>Destaque</strong></label>
                    <select id="propBadge" style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px; width: 100%;">
                        <option value="Novo">Novo</option>
                        <option value="Destaque">Destaque</option>
                        <option value="Luxo">Luxo</option>
                        <option value="MCMV">Minha Casa Minha Vida</option>
                        <option value="Fazenda">Fazenda</option>
                        <option value="Ch√°cara">Ch√°cara</option>
                    </select>
                </div>
            </div>
            
            <div style="margin-bottom: 1.5rem;">
                <label style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="propHasVideo"> 
                    <span><strong>Este im√≥vel tem v√≠deo?</strong></span>
                </label>
            </div>
            
            <div style="display: flex; gap: 1rem;">
                <button type="submit" style="background: var(--success); color: white; padding: 1rem 2rem; border: none; border-radius: 5px; cursor: pointer; flex: 1; font-size: 1.1rem;">
                    <i class="fas fa-plus"></i> Adicionar Im√≥vel ao Site
                </button>
                <button type="button" id="cancelEditBtn" onclick="cancelEdit()" style="background: #95a5a6; color: white; padding: 1rem 2rem; border: none; border-radius: 5px; cursor: pointer; display: none;">
                    <i class="fas fa-times"></i> Cancelar Edi√ß√£o
                </button>
            </div>
        </form>
        
        <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #eee;">
            <h4>Gerenciar Im√≥veis Existentes</h4>
            <p><small>Total de im√≥veis: <span id="propertyCount">0</span></small></p>
            <div id="propertyList"></div>
        </div>
    </div>
</section>

    <button class="admin-toggle" onclick="toggleAdminPanel()">
        <i class="fas fa-user-cog"></i>
    </button>

    <script>

// ========== CONFIGURA√á√ÉO SUPABASE ==========
const SUPABASE_URL = 'https://syztbxvpdaplpetmixmt.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5enRieHZwZGFwbHBldG1peG10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxODY0OTAsImV4cCI6MjA3OTc2MjQ5MH0.SISlMoO1kLWbIgx9pze8Dv1O-kfQ_TAFDX6yPUxfJxo';

console.log('üöÄ Weber Lessa Im√≥veis - Sistema Iniciado');

// ========== SISTEMA DE IM√ìVEIS ==========
let properties = [];
let editingPropertyId = null;
let selectedFiles = [];

// Dados iniciais com IMAGENS de exemplo
function getInitialProperties() {
    return [
        {
            id: 1,
            title: "Casa 2Qtos - Forene",
            price: "R$ 180.000",
            location: "Resid√™ncia Conj. Portal do Renascer, Forene",
            description: "Casa a 100m do CEASA; - Medindo 6,60m frente X 19m lado; - 125,40m¬≤ de √°rea total; -Somente um √∫nico dono; - 02 Quartos, Sala; - Cozinha; - 02 Banheiros; - Varanda; - 02 Vagas de garagem; - √Ågua de Po√ßo Artesiano;",
            features: ["02 Quartos", "Sala", "Cozinha", "02 Banheiros", "Varanda", "02 Vagas de carro"],
            type: "residencial",
            has_video: true, // CORRIGIDO: has_video em vez de hasVideo
            badge: "Destaque",
            rural: false,
            images: "https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80,https://images.unsplash.com/photo-1513584684374-8bab748fbf90?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",
            created_at: new Date().toISOString()
        },
        {
            id: 2,
            title: "Apartamento 4Qtos (178m¬≤) - Ponta Verde",
            price: "R$ 1.500.000",
            location: "Rua Saleiro Pit√£o, Ponta Verde - Macei√≥/AL",
            description: "Apartamento amplo, super claro e arejado, im√≥vel diferenciado com 178m¬≤ de √°rea privativa, oferecendo conforto, espa√ßo e alto padr√£o de acabamento. 4 Qtos, sendo 03 su√≠tes, sala ampla com varanda, cozinha, depend√™ncia de empregada, √°rea de servi√ßo, 02 vagas de garagem no subsolo.",
            features: ["4Qtos s/ 3 su√≠tes", "Sala ampla com varanda", "Cozinha", "√Årea de servi√ßo", "DCE", "02 vagas de garagem"],
            type: "residencial",
            has_video: false, // CORRIGIDO: has_video em vez de hasVideo
            badge: "Luxo",
            rural: false,
            images: "https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80,https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",
            created_at: new Date().toISOString()
        }
    ];
}

// ========== CARREGAR IM√ìVEIS ==========
async function loadProperties() {
    try {
        console.log('üì° Carregando im√≥veis do Supabase...');
        
        const response = await fetch(`${SUPABASE_URL}/rest/v1/properties?select=*`, {
            headers: {
                'apikey': SUPABASE_KEY,
                'Authorization': `Bearer ${SUPABASE_KEY}`
            }
        });
        
        if (response.ok) {
            const data = await response.json();
            properties = Array.isArray(data) ? data : [];
            console.log(`‚úÖ ${properties.length} im√≥veis carregados do Supabase`);
            
            // CORRE√á√ÉO: Garantir que as imagens sejam tratadas corretamente
            properties = properties.map(property => {
                // Se images estiver vazio, usar imagens padr√£o
                if (!property.images || property.images === 'EMPTY' || property.images.trim() === '') {
                    property.images = "https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80";
                }
                return property;
            });
            
        } else {
            console.log('‚ö†Ô∏è Supabase n√£o acess√≠vel, usando dados locais');
            throw new Error('Supabase n√£o dispon√≠vel');
        }
        
    } catch (error) {
        console.log('üîÑ Carregando dados locais...', error);
        const localData = localStorage.getItem('weberlessa_properties');
        properties = localData ? JSON.parse(localData) : getInitialProperties();
    }
    
    renderProperties();
}

// ========== RENDERIZAR IM√ìVEIS CORRIGIDO ==========
function renderProperties(filter = 'todos') {
    const container = document.getElementById('properties-container');
    if (!container) {
        console.error('‚ùå Container de propriedades n√£o encontrado!');
        return;
    }
    
    container.innerHTML = '';
    
    const filteredProperties = filter === 'todos' ? properties : properties.filter(p => {
        if (filter === 'Residencial') return p.type === 'residencial';
        if (filter === 'Comercial') return p.type === 'comercial';
        if (filter === 'Rural') return p.type === 'rural';
        if (filter === 'Minha Casa Minha Vida') return p.badge === 'MCMV';
        return true;
    });
    
    if (filteredProperties.length === 0) {
        container.innerHTML = '<p style="text-align: center; padding: 2rem; color: #666;">Nenhum im√≥vel encontrado para este filtro.</p>';
        return;
    }
    
    console.log(`üé® Renderizando ${filteredProperties.length} im√≥veis...`);
    
    filteredProperties.forEach(property => {
        const features = Array.isArray(property.features) ? property.features : (property.features ? property.features.split(',') : []);
        
        // DEBUG: Verificar imagens
        const hasImages = property.images && property.images.length > 0 && property.images !== 'EMPTY';
        const imageUrls = hasImages ? property.images.split(',').filter(url => url.trim() !== '') : [];
        const firstImageUrl = imageUrls.length > 0 ? imageUrls[0] : 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80';
        
        console.log(`üìã Im√≥vel: ${property.title}`);
        console.log(`üñºÔ∏è Tem imagens: ${hasImages}`);
        console.log(`üîó URLs: ${property.images}`);
        console.log(`üì∏ Primeira imagem: ${firstImageUrl}`);
        
        // CORRE√á√ÉO: has_video em vez de hasVideo
        const hasVideo = property.has_video !== undefined ? property.has_video : property.hasVideo;
        
        const card = `
            <div class="property-card">
                <div class="property-image ${property.rural ? 'rural-image' : ''}" style="position: relative; height: 250px; background: ${hasImages ? 'none' : 'linear-gradient(45deg, var(--accent), var(--secondary))'};">
                    <img src="${firstImageUrl}" 
                         style="width: 100%; height: 100%; object-fit: cover;"
                         alt="${property.title}"
                         onerror="this.src='https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80'">
                    ${property.badge ? `<div class="property-badge ${property.rural ? 'rural-badge' : ''}">${property.badge}</div>` : ''}
                    ${hasVideo ? `<div class="video-indicator"><i class="fas fa-video"></i> TEM V√çDEO</div>` : ''}
                    ${hasImages ? `<div class="image-count">üì∏ ${imageUrls.length}</div>` : ''}
                </div>
                <div class="property-content">
                    <div class="property-price">${property.price}</div>
                    <h3 class="property-title">${property.title}</h3>
                    <div class="property-location"><i class="fas fa-map-marker-alt"></i> ${property.location}</div>
                    <p>${property.description}</p>
                    <div class="property-features">
                        ${features.map(f => `<span class="feature-tag ${property.rural ? 'rural-tag' : ''}">${f.trim()}</span>`).join('')}
                    </div>
                    <button class="contact-btn" onclick="contactAgent(${property.id})">
                        <i class="fab fa-whatsapp"></i> Entrar em Contato
                    </button>
                </div>
            </div>
        `;
        container.innerHTML += card;
    });
}

// ========== SALVAR NO LOCALSTORAGE (FUN√á√ÉO FALTANDO) ==========
function saveToLocalStorage(propertyData) {
    try {
        console.log('üíæ Salvando no localStorage...');
        
        // Se estiver editando, atualizar o im√≥vel existente
        if (editingPropertyId) {
            const index = properties.findIndex(p => p.id === editingPropertyId);
            if (index !== -1) {
                // Manter o ID original e adicionar URLs das imagens
                propertyData.id = editingPropertyId;
                if (selectedFiles.length > 0) {
                    // Em modo local, usar URLs de imagens de exemplo
                    propertyData.images = "https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80,https://images.unsplash.com/photo-1513584684374-8bab748fbf90?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80";
                }
                properties[index] = { ...properties[index], ...propertyData };
            }
        } else {
            // Novo im√≥vel
            const newId = properties.length > 0 ? Math.max(...properties.map(p => p.id)) + 1 : 1;
            const newProperty = {
                id: newId,
                ...propertyData,
                images: "https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80,https://images.unsplash.com/photo-1513584684374-8bab748fbf90?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80"
            };
            properties.push(newProperty);
        }
        
        localStorage.setItem('weberlessa_properties', JSON.stringify(properties));
        renderProperties();
        loadPropertyList();
        
        console.log('‚úÖ Salvo no localStorage com sucesso!');
        return true;
        
    } catch (error) {
        console.error('‚ùå Erro ao salvar no localStorage:', error);
        return false;
    }
}
        
// ========== DEBUG DO SUPABASE ==========
async function testSupabaseConnection() {
    console.log('üîç Testando conex√£o com Supabase...');
    
    try {
        // Testar acesso √† tabela
        const tableResponse = await fetch(`${SUPABASE_URL}/rest/v1/properties?select=*`, {
            headers: {
                'apikey': SUPABASE_KEY,
                'Authorization': `Bearer ${SUPABASE_KEY}`
            }
        });
        
        console.log('üìä Status da tabela:', tableResponse.status);
        
        // Testar acesso ao storage
        const storageResponse = await fetch(`${SUPABASE_URL}/storage/v1/bucket/properties`, {
            headers: {
                'apikey': SUPABASE_KEY,
                'Authorization': `Bearer ${SUPABASE_KEY}`
            }
        });
        
        console.log('üì¶ Status do storage:', storageResponse.status);
        
        if (tableResponse.ok && storageResponse.ok) {
            console.log('‚úÖ Supabase configurado corretamente!');
            return true;
        } else {
            console.log('‚ùå Problema na configura√ß√£o do Supabase');
            return false;
        }
        
    } catch (error) {
        console.error('‚ùå Erro na conex√£o com Supabase:', error);
        return false;
    }
}

// ========== SISTEMA DO PAINEL ADMIN ==========
const ADMIN_PASSWORD = "weber123";

function toggleAdminPanel() {
    const password = prompt("Digite a senha de acesso ao painel:");
    if (password === ADMIN_PASSWORD) {
        const panel = document.getElementById('adminPanel');
        if (panel) {
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            if (panel.style.display === 'block') {
                loadPropertyList();
            }
        }
    } else {
        alert("Senha incorreta!");
    }
}

function loadPropertyList() {
    const container = document.getElementById('propertyList');
    const countElement = document.getElementById('propertyCount');
    
    if (!container) return;
    
    container.innerHTML = '';
    if (countElement) countElement.textContent = properties.length;
    
    if (properties.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">Nenhum im√≥vel cadastrado.</p>';
        return;
    }
    
    properties.forEach(property => {
        const features = Array.isArray(property.features) 
            ? property.features 
            : (property.features ? property.features.split(',') : []);
            
        const item = document.createElement('div');
        item.className = 'property-item';
        item.innerHTML = `
            <div style="flex: 1;">
                <strong style="color: var(--primary);">${property.title}</strong><br>
                <small>${property.price} - ${property.location}</small>
                <div style="margin-top: 0.5rem;">
                    ${features.map(f => 
                        `<span style="background: var(--accent); color: white; padding: 0.2rem 0.5rem; border-radius: 10px; font-size: 0.8rem; margin-right: 0.3rem; display: inline-block; margin-bottom: 0.3rem;">${f.trim()}</span>`
                    ).join('')}
                </div>
            </div>
            <div style="display: flex; gap: 0.5rem;">
                <button onclick="editProperty(${property.id})" style="background: var(--accent); color: white; border: none; padding: 0.5rem 1rem; border-radius: 3px; cursor: pointer; display: flex; align-items: center; gap: 0.3rem;">
                    <i class="fas fa-edit"></i> Editar
                </button>
                <button onclick="deleteProperty(${property.id})" style="background: #e74c3c; color: white; border: none; padding: 0.5rem 1rem; border-radius: 3px; cursor: pointer; display: flex; align-items: center; gap: 0.3rem;">
                    <i class="fas fa-trash"></i> Excluir
                </button>
            </div>
        `;
        container.appendChild(item);
    });
}

// ========== EDITAR IM√ìVEL CORRIGIDO ==========
function editProperty(id) {
    const property = properties.find(p => p.id === id);
    if (!property) return;

    editingPropertyId = id;
    
    // Preencher formul√°rio
    document.getElementById('propTitle').value = property.title || '';
    document.getElementById('propPrice').value = property.price || '';
    document.getElementById('propLocation').value = property.location || '';
    document.getElementById('propDescription').value = property.description || '';
    
    const features = Array.isArray(property.features) 
        ? property.features 
        : (property.features || '');
    document.getElementById('propFeatures').value = Array.isArray(features) ? features.join(', ') : features;
    
    document.getElementById('propType').value = property.type || 'residencial';
    document.getElementById('propBadge').value = property.badge || 'Novo';
    
    // CORRE√á√ÉO: Usar has_video em vez de hasVideo
    const hasVideo = property.has_video !== undefined ? property.has_video : property.hasVideo;
    document.getElementById('propHasVideo').checked = hasVideo || false;
    
    // Atualizar t√≠tulo do formul√°rio
    const formTitle = document.getElementById('formTitle');
    if (formTitle) {
        formTitle.textContent = 'Editar Im√≥vel';
    }
    
    // Atualizar texto do bot√£o
    const submitBtn = document.querySelector('#propertyForm button[type="submit"]');
    if (submitBtn) {
        submitBtn.innerHTML = '<i class="fas fa-save"></i> Atualizar Im√≥vel';
    }
    
    // Mostrar bot√£o cancelar
    const cancelBtn = document.getElementById('cancelEditBtn');
    if (cancelBtn) {
        cancelBtn.style.display = 'block';
    }
    
    // Mostrar imagens existentes se houver
    selectedFiles = [];
    const preview = document.getElementById('uploadPreview');
    if (preview) {
        preview.innerHTML = '';
        
        if (property.images && property.images.length > 0 && property.images !== 'EMPTY') {
            const existingImages = property.images.split(',').filter(img => img.trim() !== '');
            preview.innerHTML = '<p style="color: #666; margin-bottom: 1rem;">üì∏ Fotos atuais do im√≥vel:</p>';
            
            existingImages.forEach((imgUrl, index) => {
                const imgContainer = document.createElement('div');
                imgContainer.style.cssText = 'position: relative; display: inline-block; margin: 5px;';
                imgContainer.innerHTML = `
                    <img src="${imgUrl}" style="width: 100px; height: 100px; object-fit: cover; border-radius: 5px; border: 2px solid var(--success);">
                    <div style="font-size: 0.7rem; text-align: center; margin-top: 5px; max-width: 100px; word-break: break-all;">Foto ${index + 1}</div>
                `;
                preview.appendChild(imgContainer);
            });
            
            preview.innerHTML += '<p style="color: #666; margin: 1rem 0;">üí° Voc√™ pode adicionar novas fotos acima.</p>';
        }
    }
    
    // Rolar at√© o formul√°rio
    document.getElementById('adminPanel').scrollIntoView({ behavior: 'smooth' });
    
    alert("Im√≥vel carregado para edi√ß√£o! Modifique os campos e clique em 'Atualizar Im√≥vel' para salvar.");
}

        
// ========== SISTEMA DE UPLOAD ==========
function setupUploadSystem() {
    const uploadArea = document.getElementById('uploadArea');
    const fileInput = document.getElementById('fileInput');
    const uploadPreview = document.getElementById('uploadPreview');

    if (uploadArea && fileInput) {
        // Drag and drop
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--primary)';
            uploadArea.style.background = '#f0f8ff';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#ddd';
            uploadArea.style.background = '';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#ddd';
            uploadArea.style.background = '';
            
            if (e.dataTransfer.files.length > 0) {
                handleFiles(e.dataTransfer.files);
            }
        });

        // Click para selecionar
        uploadArea.addEventListener('click', () => fileInput.click());

        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });
    }
}

function handleFiles(files) {
    const newFiles = Array.from(files);
    
    // Limitar a 10 arquivos
    if (selectedFiles.length + newFiles.length > 10) {
        alert('‚ö†Ô∏è M√°ximo de 10 arquivos permitidos!');
        return;
    }
    
    // Verificar tamanho dos arquivos (5MB max)
    for (const file of newFiles) {
        if (file.size > 5 * 1024 * 1024) {
            alert(`‚ö†Ô∏è O arquivo "${file.name}" √© muito grande! M√°ximo: 5MB`);
            return;
        }
    }
    
    selectedFiles = [...selectedFiles, ...newFiles];
    showPreview();
}

function showPreview() {
    const preview = document.getElementById('uploadPreview');
    if (!preview) return;

    preview.innerHTML = '';

    if (selectedFiles.length === 0) {
        preview.innerHTML = '<p style="color: #666; text-align: center;">Nenhum arquivo selecionado</p>';
        return;
    }

    selectedFiles.forEach((file, index) => {
        const fileItem = document.createElement('div');
        fileItem.style.cssText = 'position: relative; display: inline-block; margin: 5px;';

        if (file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (e) => {
                fileItem.innerHTML = `
                    <img src="${e.target.result}" 
                         style="width: 100px; height: 100px; object-fit: cover; border-radius: 5px; border: 2px solid #ddd;">
                    <button onclick="removeFile(${index})" 
                            style="position: absolute; top: -5px; right: -5px; background: #e74c3c; color: white; border: none; border-radius: 50%; width: 20px; height: 20px; font-size: 12px; cursor: pointer; line-height: 1;">√ó</button>
                    <div style="font-size: 0.7rem; text-align: center; margin-top: 5px; max-width: 100px; word-break: break-all;">${file.name}</div>
                `;
                preview.appendChild(fileItem);
            };
            reader.readAsDataURL(file);

        } else if (file.type.startsWith('video/')) {
            fileItem.innerHTML = `
                <div style="background: #f0f0f0; padding: 1rem; border-radius: 5px; text-align: center; width: 100px; height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <i class="fas fa-video" style="font-size: 2rem; color: var(--primary);"></i>
                    <p style="margin: 0.5rem 0 0; font-size: 0.7rem; word-break: break-all;">${file.name}</p>
                    <button onclick="removeFile(${index})" 
                            style="position: absolute; top: -5px; right: -5px; background: #e74c3c; color: white; border: none; border-radius: 50%; width: 20px; height: 20px; font-size: 12px; cursor: pointer;">√ó</button>
                </div>
            `;
            preview.appendChild(fileItem);

        } else if (file.type === 'application/pdf') {
            fileItem.innerHTML = `
                <div style="background: #f0f0f0; padding: 1rem; border-radius: 5px; text-align: center; width: 100px; height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <i class="fas fa-file-pdf" style="font-size: 2rem; color: #e74c3c;"></i>
                    <p style="margin: 0.5rem 0 0; font-size: 0.7rem; word-break: break-all;">${file.name}</p>
                    <button onclick="removeFile(${index})" 
                            style="position: absolute; top: -5px; right: -5px; background: #e74c3c; color: white; border: none; border-radius: 50%; width: 20px; height: 20px; font-size: 12px; cursor: pointer;">√ó</button>
                </div>
            `;
            preview.appendChild(fileItem);
        }
    });
}

function removeFile(index) {
    selectedFiles.splice(index, 1);
    showPreview();
    
    // Atualizar input file
    const dataTransfer = new DataTransfer();
    selectedFiles.forEach(file => dataTransfer.items.add(file));
    document.getElementById('fileInput').files = dataTransfer.files;
}

// ========== UPLOAD PARA SUPABASE ==========
async function uploadFile(file) {
    try {
        console.log('üì§ Iniciando upload:', file.name);
        
        const fileName = `${Date.now()}_${file.name.replace(/\s+/g, '_')}`;
        const formData = new FormData();
        formData.append('file', file);

        const response = await fetch(
            `${SUPABASE_URL}/storage/v1/object/properties/${fileName}`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${SUPABASE_KEY}`,
                    'apikey': SUPABASE_KEY
                },
                body: formData
            }
        );

        if (!response.ok) {
            const errorText = await response.text();
            console.error('‚ùå Erro no upload:', errorText);
            throw new Error(`Upload falhou: ${response.status} - ${errorText}`);
        }

        const result = await response.json();
        
        // URL CORRETA para acesso p√∫blico
        const publicUrl = `${SUPABASE_URL}/storage/v1/object/public/properties/${fileName}`;
        
        console.log('‚úÖ Upload conclu√≠do:', publicUrl);
        return publicUrl;
        
    } catch (error) {
        console.error('‚ùå Erro cr√≠tico no upload:', error);
        return null;
    }
}

// ========== SALVAR IM√ìVEL CORRIGIDO ==========
async function saveProperty(propertyData) {
    try {
        console.log('üíæ Iniciando processo de salvamento...');

        // CORRE√á√ÉO: Usar has_video em vez de hasVideo
        const dataToSave = {
            title: propertyData.title,
            price: propertyData.price,
            location: propertyData.location,
            description: propertyData.description,
            features: Array.isArray(propertyData.features) ? propertyData.features.join(', ') : propertyData.features,
            type: propertyData.type,
            has_video: propertyData.has_video, // CORRIGIDO: has_video
            badge: propertyData.badge,
            rural: propertyData.rural,
            created_at: propertyData.created_at || new Date().toISOString()
        };

        // Upload dos arquivos se houver
        if (selectedFiles.length > 0) {
            console.log(`üì∏ Fazendo upload de ${selectedFiles.length} arquivos...`);
            let uploadedFiles = [];
            
            for (const file of selectedFiles) {
                console.log(`‚¨ÜÔ∏è Enviando: ${file.name}`);
                const fileUrl = await uploadFile(file);
                if (fileUrl) {
                    uploadedFiles.push(fileUrl);
                    console.log(`‚úÖ Upload realizado: ${fileUrl}`);
                }
            }
            
            if (uploadedFiles.length > 0) {
                dataToSave.images = uploadedFiles.join(', ');
                console.log('üñºÔ∏è URLs das imagens para salvar:', dataToSave.images);
            }
        } else if (editingPropertyId) {
            // Manter imagens existentes ao editar
            const existingProperty = properties.find(p => p.id === editingPropertyId);
            if (existingProperty && existingProperty.images) {
                dataToSave.images = existingProperty.images;
                console.log('üîÑ Mantendo imagens existentes:', dataToSave.images);
            }
        }

        console.log('üì§ Dados completos para salvar:', dataToSave);

        // Determinar URL e m√©todo
        const url = editingPropertyId
            ? `${SUPABASE_URL}/rest/v1/properties?id=eq.${editingPropertyId}`
            : `${SUPABASE_URL}/rest/v1/properties`;

        const method = editingPropertyId ? 'PATCH' : 'POST';

        console.log(`üåê Fazendo requisi√ß√£o: ${method} ${url}`);

        const response = await fetch(url, {
            method: method,
            headers: {
                'Content-Type': 'application/json',
                'apikey': SUPABASE_KEY,
                'Authorization': `Bearer ${SUPABASE_KEY}`,
                'Prefer': 'return=representation'
            },
            body: JSON.stringify(dataToSave)
        });

        if (!response.ok) {
            const errorText = await response.text();
            console.error('‚ùå Erro na resposta do Supabase:', response.status, errorText);
            throw new Error(`Erro ao salvar: ${response.status} - ${errorText}`);
        }

        const result = await response.json();
        console.log('‚úÖ Salvo com sucesso no Supabase:', result);
        
        // Recarregar os dados do Supabase
        await loadProperties();
        return true;

    } catch (error) {
        console.error('‚ùå Erro cr√≠tico ao salvar no Supabase:', error);
        console.log('üîÑ Tentando salvar localmente como fallback...');
        return saveToLocalStorage(propertyData);
    }
}

// ========== TESTAR ACESSO √ÄS IMAGENS ==========
async function testImageAccess() {
    console.log('üîç Testando acesso √†s imagens...');
    
    // URLs das suas imagens no Supabase
    const testImages = [
        'https://syztbxvpdaplpetmixmt.supabase.co/storage/v1/object/public/properties/1764341618532_thumbnail3.jpeg',
        'https://syztbxvpdaplpetmixmt.supabase.co/storage/v1/object/public/properties/1764341628860_thumbnail2.jpeg',
        'https://syztbxvpdaplpetmixmt.supabase.co/storage/v1/object/public/properties/1764341634876_thumbnail1.jpeg'
    ];
    
    for (const imgUrl of testImages) {
        try {
            const response = await fetch(imgUrl);
            if (response.ok) {
                console.log(`‚úÖ Imagem acess√≠vel: ${imgUrl}`);
            } else {
                console.log(`‚ùå Imagem n√£o acess√≠vel: ${imgUrl} - Status: ${response.status}`);
            }
        } catch (error) {
            console.log(`‚ùå Erro ao acessar imagem: ${imgUrl} - ${error.message}`);
        }
    }
}

// Chamar a fun√ß√£o de teste
testImageAccess();
        
// ========== EXCLUIR IM√ìVEL ==========
async function deleteProperty(id) {
    const property = properties.find(p => p.id === id);
    if (!property) return;

    if (confirm(`Tem certeza que deseja EXCLUIR permanentemente o im√≥vel:\n\n"${property.title}"?\n\nEsta a√ß√£o n√£o pode ser desfeita.`)) {
        try {
            // Tentar excluir do Supabase
            const response = await fetch(`${SUPABASE_URL}/rest/v1/properties?id=eq.${id}`, {
                method: 'DELETE',
                headers: {
                    'apikey': SUPABASE_KEY,
                    'Authorization': `Bearer ${SUPABASE_KEY}`
                }
            });

            if (response.ok) {
                console.log('‚úÖ Im√≥vel exclu√≠do do Supabase');
            } else {
                console.log('‚ö†Ô∏è N√£o foi poss√≠vel excluir do Supabase');
            }
        } catch (error) {
            console.error('‚ùå Erro ao excluir do Supabase:', error);
        }

        // Excluir localmente de qualquer forma
        const index = properties.findIndex(p => p.id === id);
        if (index !== -1) {
            properties.splice(index, 1);
            localStorage.setItem('weberlessa_properties', JSON.stringify(properties));
        }

        renderProperties();
        loadPropertyList();
        alert("‚úÖ Im√≥vel exclu√≠do com sucesso!");
    }
}

// ========== FORMUL√ÅRIO CORRIGIDO ==========
function setupForm() {
    const form = document.getElementById('propertyForm');
    if (!form) return;

    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const propertyData = {
            title: document.getElementById('propTitle').value,
            price: document.getElementById('propPrice').value,
            location: document.getElementById('propLocation').value,
            description: document.getElementById('propDescription').value,
            features: document.getElementById('propFeatures').value.split(',').map(f => f.trim()).filter(f => f !== ''),
            type: document.getElementById('propType').value,
            has_video: document.getElementById('propHasVideo').checked, // CORRIGIDO: has_video
            badge: document.getElementById('propBadge').value,
            rural: document.getElementById('propType').value === 'rural',
            created_at: new Date().toISOString()
        };

        if (!propertyData.title || !propertyData.price || !propertyData.location) {
            alert('‚ùå Preencha T√≠tulo, Pre√ßo e Localiza√ß√£o!');
            return;
        }

        const submitBtn = document.querySelector('#propertyForm button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Salvando...';
        submitBtn.disabled = true;

        try {
            const success = await saveProperty(propertyData);
            
            if (success) {
                alert("‚úÖ Im√≥vel salvo com sucesso!");
            } else {
                alert("‚ùå Erro ao salvar o im√≥vel!");
            }

            this.reset();
            cancelEdit();
            selectedFiles = [];
            showPreview();

        } catch (error) {
            alert("‚ùå Erro: " + error.message);
        } finally {
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }
    });
}

// ========== FUN√á√ïES DE INTERA√á√ÉO ==========
function contactAgent(id) {
    const property = properties.find(p => p.id === id);
    if (property) {
        const message = `Ol√°! Tenho interesse no im√≥vel: ${property.title} - ${property.price}`;
        const whatsappURL = `https://wa.me/5582996044513?text=${encodeURIComponent(message)}`;
        window.open(whatsappURL, '_blank');
    }
}

function viewProperty(id) {
    const property = properties.find(p => p.id === id);
    if (property) {
        alert(`üè† ${property.title}\n\nüí∞ ${property.price}\nüìç ${property.location}\n\n${property.description}`);
    }
}

// ========== ATUALIZAR A INICIALIZA√á√ÉO ==========
document.addEventListener('DOMContentLoaded', async function() {
    console.log('üöÄ Sistema Weber Lessa Iniciado');
    
    // Testar conex√£o com Supabase
    const supabaseOk = await testSupabaseConnection();
    
    if (!supabaseOk) {
        console.log('‚ö†Ô∏è Usando modo local - Supabase n√£o dispon√≠vel');
        alert('‚ö†Ô∏è Sistema funcionando em modo local. Configure o Supabase para armazenamento permanente.');
    }
    
    loadProperties();
    setupForm();
    setupUploadSystem();
    
    // Configurar filtros
    const filterButtons = document.querySelectorAll('.filter-btn');
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            filterButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            let filter = 'todos';
            const text = this.textContent.trim();
            if (text === 'Residencial') filter = 'residencial';
            else if (text === 'Comercial') filter = 'comercial';
            else if (text === 'Rural') filter = 'rural';
            else if (text === 'Minha Casa Minha Vida') filter = 'mcmv';
            renderProperties(filter);
        });
    });
    
    console.log('‚úÖ Sistema Weber Lessa carregado!');
});
  </script>
</body>
</html>
